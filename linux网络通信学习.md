# linux网络通信学习
## 端口扫描
### nmap扫描
```
nmap -v -sT -p 10000-65535 -n 47.103.87.108
```
使用`nmap`扫描`ip`为`47.103.87.108`的地址，扫描`10000-65535`端口。
- 注意`-sS`模式会被很多防火墙阻止，所以用`-sT`模式比较保险。
- 开启`-v`参数可以看到进度。
### nc扫描
```
nc -zv 47.103.87.108 10000-65535
```
端口数量很多时nc的输出比较多，不容易查看，可以重定向到文件后，最后再查找`succeeded`
```
nc -zv 47.103.87.108 10000-65535 2>&1 | tee nc.log
```
## 代理访问
### SSH端口转发
```
ssh -L 0.0.0.0:20300:10.99.0.24:60080 -p 60030 xxxx@47.103.87.108
```
* 注意：这条命令在跳板机上执行，或者在用户终端上执行都可以
	- 区别是前者在跳板机上监听了20300端口，后者是在用户终端上监听了20300端口
	- 前者建立隧道后，浏览器上需要访问`http://47.103.87.108:20300/`
	- 后者建立隧道后，浏览器上需要访问`http://xxx.xxx.xxx.xxx:20300/`，其中`xxx.xxx.xxx.xxx`是隧道创建者所在的`Linux`终端主机
### sock5代理
```
ssh -D 1234 xxxx@47.103.87.108 -p 60030
```
### nc代理
使用两个nc进程加一个`FIFO`管理，可以实现简单的`TCP`代理:
```
mkfifo mypipe
nc -k -l -p 10001 0<mypipe | nc 10.99.0.24 60080 | tee mypipe

```